# Модальное окно создания игры

Эта папка содержит реорганизованную структуру компонента `CreateGameModal`, разделенного на более мелкие и управляемые части.

## Структура файлов

### Основные компоненты
- **`CreateGameModal.tsx`** - Главный компонент модального окна
- **`GameForm.tsx`** - Компонент формы с основной логикой
- **`PlayerSearch.tsx`** - Компонент поиска и добавления игроков
- **`PlayerList.tsx`** - Компонент отображения списка игроков
- **`ResultTable.tsx`** - Компонент управления таблицей результатов

### Логика и типы
- **`useCreateGameModal.ts`** - Хук для управления состоянием модального окна
- **`types.ts`** - Типы и интерфейсы для всех компонентов
- **`index.ts`** - Экспорт всех компонентов

## Преимущества новой структуры

1. **Разделение ответственности** - каждый компонент отвечает за свою часть функциональности
2. **Переиспользование** - компоненты можно использовать независимо
3. **Читаемость** - код стал более понятным и легким для поддержки
4. **Тестируемость** - каждый компонент можно тестировать отдельно
5. **Масштабируемость** - легко добавлять новые функции

## Новая функциональность

### Ограничение игроков
- Максимум 12 игроков в игре
- Счетчик игроков отображается в формате "X/12"
- Блокировка добавления при достижении лимита

### Добавление незарегистрированных игроков
- Поиск по существующим пользователям
- Возможность добавить игрока по никнейму (Enter)
- Автоматическое создание временного профиля
- Визуальное обозначение новых игроков

## Использование

```tsx
import { CreateGameModal } from './modalsGame';

// Использование остается таким же
<CreateGameModal
  isOpen={isModalOpen}
  onClose={handleClose}
  onSuccess={handleSuccess}
  clubId={clubId}
  seasonId={seasonId}
  tournamentId={tournamentId}
/>
```

## Компоненты

### CreateGameModal
Главный компонент, который объединяет все части модального окна.

### GameForm
Содержит основную форму с полями для создания игры и интегрирует все подкомпоненты.

### PlayerSearch
Отвечает за поиск и добавление игроков в игру:
- Поиск по имени, никнейму, email
- Добавление незарегистрированных игроков по Enter
- Счетчик игроков
- Блокировка при достижении лимита

### PlayerList
Отображает список добавленных игроков с возможностью редактирования их параметров:
- Информация об игроке
- Редактирование роли, очков, убийств, смертей
- Обозначение новых игроков
- Удаление игроков

### ResultTable
Управляет таблицей результатов игры (раунды).

### useCreateGameModal
Хук содержит всю бизнес-логику для управления состоянием модального окна:
- Ограничение на 12 игроков
- Поддержка незарегистрированных пользователей
- Валидация данных
- Отправка запроса на создание игры

## Типы

Все типы и интерфейсы определены в `types.ts` для централизованного управления типами:

- `CreateGamePlayer` - тип для создания игрока
- `PlayerUser` - объединенный тип для зарегистрированных и незарегистрированных пользователей
- `UnregisteredUser` - тип для незарегистрированных пользователей 